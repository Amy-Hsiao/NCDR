# 台灣智慧型防救災醫療資源供需資訊整合系統

## **專案簡介**
本系統為一個以生成式人工智慧（Generative AI）為核心的災防決策支援系統，結合多來源資料、即時地震資訊、歷史應變策略與 Min-Max 決策模型，協助災防指揮官迅速做出資源調度與應變決策。

## **專案背景**
台灣地處環太平洋地震帶，災害發生頻繁，災後決策需要迅速且正確，以減少人命傷亡與災損。本系統致力於透過 AI 技術提升災防決策的效率與品質，將原本3小時的跨部會決策流程縮短至20分鐘內。

---

## **目錄**
1. [專案功能](#專案功能)  
2. [系統架構](#系統架構)  
3. [安裝與部署](#安裝與部署)  
4. [技術細節](#技術細節)  
5. [未來發展](#未來發展)  

---
# 專案功能
本系統提供一個互動式災防決策支援平台，主要功能如下：

### 📍 1. 使用者互動式災防問答
- 使用者可在 Plan 分頁，進行問答及文件編輯
- 透過自然語言在對話區輸入災害情境，例如「剛剛台南市發生地震，請給我調度建議。」
- 系統自動解析輸入並調用對應模組（地震查詢 / 資源分配）
- 回傳一份完整包含綜合建議的災防建議報告
- 使用者可一鍵複製建議報告至 Markdown 編輯區進行後續的計畫編輯

### 🌐 2. 即時地震資訊整合
- 呼叫中央氣象署地震 API，取得即時災害資料
- 包含：震央、震度、規模、深度、影響區域觀測點等資訊
- 可顯示地震圖與地震報告連結

### 🚚 3. 醫療資源分配建議
- 根據地震等級與災情評估結果，自動生成資源分配策略
- 資料來源包括：各醫院醫療包數量、集結點卡車數量
- 採用 Min-Max 決策模型與 Prompt Template 導引 LLM 做出建議

### 🧠 4. 歷史案例應變策略建議
- 根據災害特徵匹配歷史地震資料庫
- 產出類似情境下的歷史應對方式，作為輔助決策參考

### 🗺️ 5. 可視化醫療資源佈署地圖
- 使用者可切換至 Map 分頁，檢視：
- 各地區的醫療包數量
- 各集結點的卡車數量
- 各醫療院所位置與支援能力
- 利用視覺化輔助災防指揮官進行空間性判斷

---
# 系統架構
本系統以 Multi-Source RAG 架構為基礎，整合以下模組：

1. **地震即時資訊查詢模組**
   - 資料來源：氣象署地震資訊 API
   - 功能：查詢震央、震度、地震規模、深度、各地震度分布圖等

2. **資源分配建議模組**
   - 資料來源：MySQL 資料庫（卡車數量、醫療包數量、醫院地點等）
   - 方法：Min-Max 決策模型進行分配建議

3. **歷史應變策略模組**
   - 方法：根據歷史地震資料與應變紀錄進行相似案例匹配，產出策略建議

4. **報告生成模組**
   - 模型：Llama3-Taide-LX-8B
   - 技術：Prompt Engineering + RAG
   - 輸出格式：Markdown 災防決策報告書

5. **可視化地圖模組**
   - 功能：呈現各地集結點、卡車與醫療資源分布地圖
   - 技術： Vue.js

---


# 安裝與部署

### 環境需求
- **Python**: 3.10
- **node.js**：v20.16.0
- **npm**：10.8.1
- **必要套件**: 詳見`requirements.txt`

### 步驟

#### 1. 安裝相依套件
```bash
pip install -r requirements.txt
```
#### 2. 運行程式
##### (1)後端Flask：
* 在`ncdr整合`資料夾找到`ncdr.sln`
* 確認`ncdr`設為啟動專案
* 確認`ncdr.py`設為啟動程式
* 按實心三角形執行
##### (2)前端Vue.js：
* 打開`ncdr`資料夾
* 找到`frontend`資料夾
* CMD輸入
```bash
npm run serve
```

# 技術細節
* 後端語言：Python
* 前端框架：Vue.js
* 語言模型：Llama3-Taide-LX-8B (本地部署)
* API：中央氣象局即時地震資訊
* 資料庫：MySQL、Pinecone
* 模組技術：Retrieval-Augmented Generation (RAG)

---

## 未來發展
* 整合颱風、豪雨等災害類型
* 完成意圖分類模組（BERT + SVM）
* 支援多輪對話與段落回應追問
* 自我審查機制與事後校正功能
* 導入使用者友善之SVG地圖視覺化模組整合前後端